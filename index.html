<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chris Psicologia</title>
  <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <div id="navbar"></div>

  <div id="fundo-escuro" class="fundo-escuro"></div>

  <main>
    <section class="hero">
      <div class="foia">
        <img src="img/icons/folha.svg" class="folha f1" alt="folhas caindo">
        <img src="img/icons/folha.svg" class="folha f2" alt="folhas caindo">
        <img src="img/icons/folha.svg" class="folha f3" alt="folhas caindo">
        <img src="img/icons/folha.svg" class="folha f4" alt="folhas caindo">
        <img src="img/icons/folha.svg" class="folha f5" alt="folhas caindo">
        <img src="img/icons/folha.svg" class="folha f6" alt="folhas caindo">
        <img src="img/icons/plantas_bege.svg" class="planta1 lado-esquerdo" alt="folhas caindo">
        <img src="img/icons/plantas_bege.svg" class="planta1 lado-direito" alt="folhas caindo">
      </div>

      <div class="conteudo-hero">
        <p>Cuidar da saúde mental é um ato de <br>
          coragem e amor próprio.<br>
          Estamos aqui para te acolher, ouvir e <br>
          caminhar ao seu lado.</p>
          <div class="botao-container">
        <a href="profissionais.html" class="consulta-botao">Agendar Consulta</a>
      </div>
      </div>
   

        <div class="cerebro-carrossel">
  <img src="img/icons/cerebro.png" class="active" />
  <img src="img/icons/arvore.svg" style="height: 400px; top: 5rem;"/>
  <img src="img/icons/livro.svg" style="height: 700px;" />
</div>


      <div class="barra-banner">
        <p>Você não veio até aqui por acaso. Algo em você, silencioso, cansado ou esperançoso já quer mudar. E isso
          merece ser ouvido.</p></div>
          
    </section>

    <div class="fundo">
      <img src="img/icons/plantaas.svg" class="planta2 lado-esquerdo" alt="" aria-hidden="true">
      <img src="img/icons/plantaas.svg" class="planta2 lado-direito" alt="" aria-hidden="true">
      <div class="conteudo-destaque">
        <h3 class="sentimentos-titulo">Você sente que algo precisa mudar ? Nós estamos aqui para te ouvir.</h3>
        <div class="sentimentos-container">

          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Ansiedade
          </div>
          <div class="card-content">
            A ansiedade é uma resposta natural ao estresse, mas quando acontece com muita frequência ou intensidade, pode causar preocupação constante, inquietação e sintomas físicos como palpitações e dificuldade para respirar. Entender como ela surge e como lidar ajuda a recuperar o controle e a tranquilidade no dia a dia.
          </div>
          
          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Depressão
          </div>
          <div class="card-content">
            A depressão vai além da tristeza passageira. É uma condição que afeta o humor, os pensamentos e as atitudes, gerando falta de interesse pelas atividades diárias, cansaço e sensação de vazio. Saber que é uma doença tratável pode ajudar a buscar apoio e recuperar a vontade de viver.
          </div>
          
          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Fobia Social
          </div>
          <div class="card-content">
            A fobia social é o medo intenso de ser julgado ou rejeitado em situações sociais, o que pode causar ansiedade, isolamento e dificuldades para manter relacionamentos. Com o suporte adequado, é possível aprender estratégias para enfrentar esses desafios e aumentar a confiança.
          </div>

          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Luto
          </div>
          <div class="card-content">
            O luto é o processo natural de adaptação à perda de alguém ou algo importante. Ele pode trazer uma mistura intensa de emoções como tristeza, raiva, culpa e confusão. Entender que cada pessoa vive o luto de forma única ajuda a aceitar o tempo necessário para a recuperação e a buscar apoio quando necessário.
          </div>
          
          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Trauma
          </div>
          <div class="card-content">
            O trauma ocorre após vivenciar ou testemunhar eventos assustadores ou dolorosos, que podem afetar a forma como você se sente, pensa e se relaciona. Sintomas comuns incluem flashbacks, ansiedade intensa e sensação de insegurança. Com ajuda adequada, é possível trabalhar essas experiências para retomar o equilíbrio emocional.
          </div>

          <div class="card-sentimento" onclick="toggleCard(this)">
            <input type="radio" name="sentimento" /> Outros
          </div>
          <div class="card-content">
            Seja qual for o motivo, estamos prontos para te escutar.<br>Conte conosco.
          </div>
        </div>
      </div>
      <div class="barra-quebra"></div>

      <div class="fundo-profissionais">
        <img src="img/icons/plantaas.svg" class="planta3 lado-esquerdo" alt="" aria-hidden="true">
      <img src="img/icons/plantaas.svg" class="planta3 lado-direito" alt="" aria-hidden="true">
      <div class="mais-conteudo profissionais">
        <h2 class="profissionais-titulo">Nossos Profissionais</h2>
        <p class="descricao">
          Nossa equipe é especializada em acolher quem enfrenta desafios emocionais. Juntos, podemos construir novos
          caminhos para uma vida mais leve e equilibrada.
        </p>

        <div class="carrossel">
          <button class="seta esquerda" aria-label="Anterior" onclick="moverCarrossel(-1)">&#10094;</button>

          <div class="cards" id="cards-carrossel">
          </div>

        <button class="seta direita" aria-label="Próximo" onclick="moverCarrossel(1)">&#10095;</button>

      </div>

      <div class="btn-ver-profissionais">
        <a href="profissionais.html" class="botao-link">Ver nossos profissionais</a>
      </div>
      
      </div>
    </div>

    <div class="barra-quebra"></div>

      <div class="mais-conteudo quem-somos">
        <img src="img/icons/plantaas.svg" class="planta4 lado-esquerdo" alt="" aria-hidden="true">
      <img src="img/icons/plantaas.svg" class="planta4 lado-direito" alt="" aria-hidden="true">
        <h2 class="quem-somos-titulo">Quem Somos</h2>
        <p class="quem-somos-descricao">
          Somos uma clínica dedicada ao cuidado emocional e psicológico, oferecendo um ambiente acolhedor e seguro para nossos pacientes.
        </p>
      
        <div class="carrossel-imagens">
          <div class="faixa-imagens" id="faixa-imagens-quem-somos">
          </div>
        </div>
        <div class="btn-quem-somos-container">
          <a href="sobre.html" class="btn-quem-somos">Saiba mais</a>
        </div>
      </div>

    </div>

    <div class="barra-quebra"></div>

  <section id="servicos" class="servicos">
    <img src="img/icons/plantaas.svg" class="planta5 lado-esquerdo" alt="" aria-hidden="true">
    <img src="img/icons/plantaas.svg" class="planta5 lado-direito" alt="" aria-hidden="true">
    <div class="card-central">
      <h2 class="card-titulo">Serviços</h2>
      <p class="card-descricao">Acolhimento psicológico em diversas fases da vida com empatia e responsabilidade.</p>

    <div class="cards-servicos" id="cards-servicos-index">
    </div>

    <a href="servicos.html" class="btn-saiba-mais-centralizado">Saiba mais</a>
    </div>
  </section>
    
    
    
    </div>
  </main>
  <div class="barra-quebra-foot">Cuidar da mente é um ato de coragem</div>

  <footer id="footer"></footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Seleciona o container onde os cards dos profissionais serão inseridos
    const container = document.getElementById('cards-carrossel');
    if (!container) {
      console.error('Elemento com ID "cards-carrossel" não encontrado.');
      return;
    }

    container.innerHTML = '<p style="text-align: center; color: #5D6D68;">Carregando profissionais...</p>'; // Mensagem de carregamento

    // Faz a requisição para buscar os dados dos profissionais públicos
    fetch('/backend/profissionais/listar-publico')
      .then(response => {
        if (!response.ok) {
          throw new Error('Falha ao carregar dados da rede. Status: ' + response.status);
        }
        return response.json();
      })
      .then(profissionais => {
        // Verifica se a resposta contém os dados esperados
        if (!profissionais || !Array.isArray(profissionais)) {
          throw new Error('API retornou dados em formato inválido ou vazio.');
        }

        container.innerHTML = ''; // Limpa a mensagem de carregamento

        if (profissionais.length === 0) {
           container.innerHTML = '<p style="text-align: center; color: #5D6D68;">Nenhum profissional disponível no momento.</p>';
           return;
        }

        // --- Lógica para Duplicação (para carrossel infinito) ---
        // Cria uma lista maior repetindo os profissionais para o efeito de loop
        const profissionaisParaCarrossel = [];
        // Repete a lista algumas vezes (ex: 3 vezes para ter blocos antes e depois)
        for (let i = 0; i < 3; i++) {
            profissionais.forEach(prof => profissionaisParaCarrossel.push(prof));
        }
        // --- Fim da Lógica para Duplicação ---


        // Itera sobre a lista DUPLICADA para criar os cards
        profissionaisParaCarrossel.forEach(profissional => {
          // Lógica para definir a imagem (igual ao profissionais.js)
          const nomeBase = profissional.nome_usuario.split(' ')[0].toLowerCase();
          const fotoUrlPadrao = `img/profissionais/${nomeBase}.png`;
          const fotoFinal = profissional.img_profissional || fotoUrlPadrao;

          // Cria o HTML do card para cada profissional
          const cardHtml = `
            <div class="card" data-id-profissional="${profissional.id_profissional}">
              <a href="profissionais.html" class="card-link">
                <div class="foto" style="background-image: url('${fotoFinal}'); background-size: cover; background-position: center;">
                </div>
                <h3>${profissional.nome_usuario}</h3>
                <div class="avaliacoes">
                  <h4>Psicólogo(a)</h4>
                  <p>${profissional.especialidade || 'Clínica Geral'}</p>
                </div>
              </a>
            </div>
          `;
          // Insere o HTML do card no container
          container.insertAdjacentHTML('beforeend', cardHtml);
        });

        // Após adicionar todos os cards, inicializa a lógica de destaque do carrossel (se existir)
        if (typeof destacarCardCentral === 'function') {
            destacarCardCentral();
             // --- Ajuste Inicial do Scroll para o Meio (após duplicar) ---
             const cardWidth = 300 + 60; // Largura do card + gap
             const totalOriginalCards = profissionais.length;
             // Começa no início do segundo bloco de cards
             container.scrollLeft = totalOriginalCards * cardWidth;
             // --- Fim do Ajuste Inicial ---
        }


      })
      .catch(error => {
        console.error('Erro ao buscar profissionais:', error);
        container.innerHTML = '<p style="color: red; text-align: center;">Não foi possível carregar os profissionais no momento. Tente novamente mais tarde.</p>';
      });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {

    // --- Carregar Imagens do Carrossel "Quem Somos" ---
    const quemSomosContainer = document.getElementById('faixa-imagens-quem-somos');
    if (quemSomosContainer) {
        quemSomosContainer.innerHTML = '<p style="text-align: center; color: #5D6D68; padding: 20px;">Carregando imagens...</p>';

        // !!! IMPORTANTE: Endpoint Hipotético !!!
        // Você precisa criar este endpoint no seu backend (Rotas.php, um novo Controller ou método)
        // Ele deve retornar um JSON com a lista de URLs das imagens para o carrossel "Quem Somos".
        // Exemplo de JSON esperado: ["img/quem-somos/corredor.png", "img/quem-somos/recepcao.png", ...]
        // OU [{ "url_imagem": "img/quem-somos/corredor.png" }, { "url_imagem": "img/quem-somos/recepcao.png" }, ...]
        fetch('/backend/api/imagens/quem-somos') // <<< SUBSTITUA PELO SEU ENDPOINT REAL
            .then(response => {
                if (!response.ok) {
                    throw new Error('Falha ao carregar imagens da clínica. Status: ' + response.status);
                }
                return response.json();
            })
            .then(imagens => {
                 // Adapte a validação conforme a estrutura do seu JSON real
                if (!Array.isArray(imagens) || imagens.length === 0) {
                     throw new Error('Nenhuma imagem da clínica encontrada ou formato inválido.');
                }

                quemSomosContainer.innerHTML = ''; // Limpa o "Carregando..."

                // --- Lógica para Duplicação (para animação infinita) ---
                const imagensParaCarrossel = [];
                 // Repete a lista pelo menos duas vezes para o efeito funcionar
                 const repeticoes = Math.max(2, Math.ceil(8 / imagens.length)); // Garante pelo menos umas 8 imagens
                 for (let i = 0; i < repeticoes; i++) {
                     imagens.forEach(imgData => imagensParaCarrossel.push(imgData));
                 }
                // --- Fim da Lógica para Duplicação ---

                // Itera sobre a lista DUPLICADA
                imagensParaCarrossel.forEach(imgData => {
                    // Adapte 'imgData.url_imagem' ou apenas 'imgData' se a API retornar só a string URL
                    const imageUrl = typeof imgData === 'string' ? imgData : imgData.url_imagem;
                     if (imageUrl) {
                        const imgHtml = `<img src="${imageUrl}" alt="Imagem da clínica">`;
                        quemSomosContainer.insertAdjacentHTML('beforeend', imgHtml);
                    }
                });
            })
            .catch(error => {
                console.error('Erro ao buscar imagens da clínica:', error);
                quemSomosContainer.innerHTML = '<p style="color: red; text-align: center; padding: 20px;">Não foi possível carregar as imagens da clínica.</p>';
            });
    } else {
         console.error('Elemento com ID "faixa-imagens-quem-somos" não encontrado.');
    }


    // --- Carregar Cards de "Serviços" ---
    const servicosContainer = document.getElementById('cards-servicos-index');
    if (servicosContainer) {
        servicosContainer.innerHTML = '<p style="text-align: center; color: #5D6D68; padding: 20px;">Carregando serviços...</p>';

        // Usaremos o mesmo endpoint que você já tem para a página de serviços
        fetch('/backend/api/servicos') // <<< Seu endpoint existente
            .then(response =>{
                if(!response.ok){
                    throw new Error('Falha ao carregar dados dos serviços. Status: ' + response.status);
                }
                return response.json();
            })
            .then(json => {
                // Validação baseada na estrutura que você mostrou no primeiro script
                if (json.status !== 'success' || !Array.isArray(json.data) || json.data.length === 0){
                    throw new Error('Nenhum serviço encontrado ou formato de dados inválido.');
                }

                servicosContainer.innerHTML = ''; // Limpa o "Carregando..."

                json.data.forEach(servico => {
                    // Cria o HTML do card exatamente como estava no seu index.html estático
                    const cardHtml = `
                        <div class="card-servico">
                          <img src="${servico.caminho_imagem}" alt="${servico.nome_servico}">
                          <h3>${servico.nome_servico}</h3>
                          <p>${servico.descricao_servico}</p>
                        </div>
                    `;
                    servicosContainer.insertAdjacentHTML('beforeend', cardHtml);
                });
            })
            .catch(error => {
                console.error('Erro ao buscar serviços para o index:', error);
                servicosContainer.innerHTML = '<p style="color: red; text-align: center; padding: 20px;">Não foi possível carregar os serviços no momento.</p>';
            });

    } else {
        console.error('Elemento com ID "cards-servicos-index" não encontrado.');
    }

  });
</script>

  <script src="js/header.js" defer></script>
  <script src="js/cards.js" defer></script>
  <script src="js/cerebro.js" defer></script>
  <script src="js/profissionais.js" defer></script>
  <script src="js/carrossel.js" defer></script>
  <script src="js/footer.js" defer></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="js/login-modal-injector.js" defer></script> 
  <script src="js/login.js" defer></script>
  <script src="js/registro.js" defer></script>
    <script src="js/esqueci-senha.js" defer></script>


  <div id="lightbox" class="lightbox hidden">
    <span class="fechar-lightbox" onclick="fecharLightbox()">×</span>
    <img id="img-ampliada" src="" alt="Imagem ampliada">
  </div>
  
</body>

</html>